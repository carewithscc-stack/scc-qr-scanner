<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>SCC QR Scanner</title>

<!-- FIXED & VERIFIED CDN (browser build, no exports error) -->
<script src="https://cdn.jsdelivr.net/npm/html5-qrcode@2.3.8/dist/html5-qrcode.min.js"></script>

<style>
  body { font-family: Arial; padding: 20px; }
  #reader {
    width: 100%;
    max-width: 350px;
    margin-top: 20px;
    border: 1px solid #ccc;
    border-radius: 10px;
  }
  button, select {
    padding: 12px;
    font-size: 16px;
    margin-top: 10px;
  }
</style>
</head>

<body>
  <h2>SCC QR Scanner</h2>

  <label>Aksi:</label><br>
  <select id="action">
    <option value="Picked Up">Picked Up</option>
    <option value="Delivered">Delivered</option>
  </select>

  <br><br>

  <button id="start">Start Camera</button>
  <button id="stop">Stop Camera</button>

  <div id="reader"></div>

<script>
document.addEventListener("DOMContentLoaded", () => {
  let scanner = null;

  const startBtn = document.getElementById("start");
  const stopBtn = document.getElementById("stop");

  startBtn.onclick = () => {
    if (scanner) return;

    scanner = new Html5Qrcode("reader");

    scanner.start(
      { facingMode: "environment" },
      { fps: 10, qrbox: 250 },
      (decodedText) => {
        alert("Scanned: " + decodedText);
      }
    ).catch(err => alert("Camera error: " + err));
  };

  stopBtn.onclick = () => {
    if (!scanner) return;

    scanner.stop().then(() => {
      scanner.clear();
      scanner = null;
    });
  };
});
</script>

</body>
</html>
